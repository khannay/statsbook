<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Data Wrangling | Introduction to Statistics and Data Science</title>
  <meta name="description" content="Introductory textbook for statistics and data science" />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Data Wrangling | Introduction to Statistics and Data Science" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Introductory textbook for statistics and data science" />
  <meta name="github-repo" content="khannay/statsbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Data Wrangling | Introduction to Statistics and Data Science" />
  
  <meta name="twitter:description" content="Introductory textbook for statistics and data science" />
  

<meta name="author" content="Dr. Kevin Hannay" />


<meta name="date" content="2023-02-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="exploratory-data-analysis.html"/>
<link rel="next" href="introduction-to-clustering.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="toc.css" type="text/css" />
<link rel="stylesheet" href="font-awesome.min.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"> Stats Notes </a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#librarian-or-farmer"><i class="fa fa-check"></i><b>1.1</b> Librarian or Farmer?</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#profits"><i class="fa fa-check"></i><b>1.2</b> Profits</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#accidental-deaths"><i class="fa fa-check"></i><b>1.3</b> Accidental Deaths</a></li>
</ul></li>
<li class="part"><span><b>I Exploratory Data Analysis</b></span></li>
<li class="chapter" data-level="2" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#what-is-r"><i class="fa fa-check"></i><b>2.1</b> What is R?</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-packages"><i class="fa fa-check"></i><b>2.2</b> R Packages</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-as-a-fancy-calculator"><i class="fa fa-check"></i><b>2.3</b> R as a Fancy Calculator</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#more-advanced-r"><i class="fa fa-check"></i><b>2.4</b> More Advanced R</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-types-in-r"><i class="fa fa-check"></i><b>2.4.1</b> Data Types in R</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#logic-in-r"><i class="fa fa-check"></i><b>2.5</b> Logic in R</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#storing-data-in-r"><i class="fa fa-check"></i><b>2.6</b> Storing Data in R</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#vectors"><i class="fa fa-check"></i><b>2.6.1</b> Vectors</a></li>
<li class="chapter" data-level="2.6.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-frames"><i class="fa fa-check"></i><b>2.6.2</b> Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-plots-in-r"><i class="fa fa-check"></i><b>2.7</b> Basic Plots in R</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#additional-resources"><i class="fa fa-check"></i><b>2.8</b> Additional Resources</a></li>
<li class="chapter" data-level="2.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#homework"><i class="fa fa-check"></i><b>2.9</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>3</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#shot-logs-basketball-data"><i class="fa fa-check"></i><b>3.1</b> Shot Logs Basketball Data</a></li>
<li class="chapter" data-level="3.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#principal-types-of-statistical-data"><i class="fa fa-check"></i><b>3.2</b> Principal Types of Statistical Data</a></li>
<li class="chapter" data-level="3.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#the-distribution-of-a-data-set"><i class="fa fa-check"></i><b>3.3</b> The Distribution of a Data Set</a></li>
<li class="chapter" data-level="3.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#numerical-measures-for-central-tendency"><i class="fa fa-check"></i><b>3.4</b> Numerical Measures for Central Tendency</a></li>
<li class="chapter" data-level="3.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#numerical-measures-of-variability"><i class="fa fa-check"></i><b>3.5</b> Numerical Measures of Variability</a></li>
<li class="chapter" data-level="3.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#numerical-measures-for-relative-standing"><i class="fa fa-check"></i><b>3.6</b> Numerical Measures for Relative Standing</a></li>
<li class="chapter" data-level="3.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#relation-between-continuous-and-categorical-variables-boxplot"><i class="fa fa-check"></i><b>3.7</b> Relation between Continuous and Categorical Variables: Boxplot</a></li>
<li class="chapter" data-level="3.8" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#relation-between-continuous-variables-scatter-plots"><i class="fa fa-check"></i><b>3.8</b> Relation between Continuous Variables: Scatter Plots</a></li>
<li class="chapter" data-level="3.9" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#relationship-between-categorical-variables-contingency-tables"><i class="fa fa-check"></i><b>3.9</b> Relationship between Categorical Variables: Contingency Tables</a></li>
<li class="chapter" data-level="3.10" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#tips-and-tricks"><i class="fa fa-check"></i><b>3.10</b> Tips and Tricks</a></li>
<li class="chapter" data-level="3.11" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#homework-1"><i class="fa fa-check"></i><b>3.11</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>4</b> Data Wrangling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-wrangling.html"><a href="data-wrangling.html#what-is-data-wrangling"><i class="fa fa-check"></i><b>4.1</b> What is Data Wrangling?</a></li>
<li class="chapter" data-level="4.2" data-path="data-wrangling.html"><a href="data-wrangling.html#nas-and-the-curse-of-real-world-data"><i class="fa fa-check"></i><b>4.2</b> NA’s and the Curse of Real World Data</a></li>
<li class="chapter" data-level="4.3" data-path="data-wrangling.html"><a href="data-wrangling.html#select-pick-only-a-few-columns"><i class="fa fa-check"></i><b>4.3</b> Select: Pick only a few columns</a></li>
<li class="chapter" data-level="4.4" data-path="data-wrangling.html"><a href="data-wrangling.html#filter-select-rows"><i class="fa fa-check"></i><b>4.4</b> Filter (select rows)</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data-wrangling.html"><a href="data-wrangling.html#compound-criteria"><i class="fa fa-check"></i><b>4.4.1</b> Compound Criteria</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-wrangling.html"><a href="data-wrangling.html#chainspipes"><i class="fa fa-check"></i><b>4.5</b> Chains/Pipes %&gt;%</a></li>
<li class="chapter" data-level="4.6" data-path="data-wrangling.html"><a href="data-wrangling.html#grouping-data-together"><i class="fa fa-check"></i><b>4.6</b> Grouping Data Together</a></li>
<li class="chapter" data-level="4.7" data-path="data-wrangling.html"><a href="data-wrangling.html#homework-2"><i class="fa fa-check"></i><b>4.7</b> Homework</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="data-wrangling.html"><a href="data-wrangling.html#concept-questions-2"><i class="fa fa-check"></i><b>4.7.1</b> Concept Questions</a></li>
<li class="chapter" data-level="4.7.2" data-path="data-wrangling.html"><a href="data-wrangling.html#practice-problems-2"><i class="fa fa-check"></i><b>4.7.2</b> Practice Problems</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="introduction-to-clustering.html"><a href="introduction-to-clustering.html"><i class="fa fa-check"></i><b>5</b> Introduction to Clustering</a>
<ul>
<li class="chapter" data-level="5.1" data-path="introduction-to-clustering.html"><a href="introduction-to-clustering.html#what-is-clustering"><i class="fa fa-check"></i><b>5.1</b> What is Clustering?</a></li>
<li class="chapter" data-level="5.2" data-path="introduction-to-clustering.html"><a href="introduction-to-clustering.html#introduction-to-kmeans-clustering"><i class="fa fa-check"></i><b>5.2</b> Introduction to Kmeans clustering</a></li>
<li class="chapter" data-level="5.3" data-path="introduction-to-clustering.html"><a href="introduction-to-clustering.html#how-many-clusters-should-we-choose"><i class="fa fa-check"></i><b>5.3</b> How many clusters should we choose?</a></li>
<li class="chapter" data-level="5.4" data-path="introduction-to-clustering.html"><a href="introduction-to-clustering.html#clustering-nba-players"><i class="fa fa-check"></i><b>5.4</b> Clustering NBA Players</a></li>
<li class="chapter" data-level="5.5" data-path="introduction-to-clustering.html"><a href="introduction-to-clustering.html#requirements-for-performing-cluster-analysis"><i class="fa fa-check"></i><b>5.5</b> Requirements for Performing Cluster Analysis</a></li>
<li class="chapter" data-level="5.6" data-path="introduction-to-clustering.html"><a href="introduction-to-clustering.html#homework-3"><i class="fa fa-check"></i><b>5.6</b> Homework</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="introduction-to-clustering.html"><a href="introduction-to-clustering.html#concept-questions-3"><i class="fa fa-check"></i><b>5.6.1</b> Concept Questions</a></li>
<li class="chapter" data-level="5.6.2" data-path="introduction-to-clustering.html"><a href="introduction-to-clustering.html#practice-problems-3"><i class="fa fa-check"></i><b>5.6.2</b> Practice Problems</a></li>
<li class="chapter" data-level="5.6.3" data-path="introduction-to-clustering.html"><a href="introduction-to-clustering.html#advanced-problems-3"><i class="fa fa-check"></i><b>5.6.3</b> Advanced Problems</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Probability Theory</b></span></li>
<li class="chapter" data-level="6" data-path="probability.html"><a href="probability.html"><i class="fa fa-check"></i><b>6</b> Probability</a>
<ul>
<li class="chapter" data-level="6.1" data-path="probability.html"><a href="probability.html#sample-spaces-and-events"><i class="fa fa-check"></i><b>6.1</b> Sample Spaces and Events</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="probability.html"><a href="probability.html#introduction"><i class="fa fa-check"></i><b>6.1.1</b> Introduction</a></li>
<li class="chapter" data-level="6.1.2" data-path="probability.html"><a href="probability.html#sample-spaces"><i class="fa fa-check"></i><b>6.1.2</b> Sample Spaces</a></li>
<li class="chapter" data-level="6.1.3" data-path="probability.html"><a href="probability.html#law-of-sample-spaces"><i class="fa fa-check"></i><b>6.1.3</b> Law of Sample Spaces</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="probability.html"><a href="probability.html#combinatorics"><i class="fa fa-check"></i><b>6.2</b> Combinatorics</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="probability.html"><a href="probability.html#basic-principle-of-counting"><i class="fa fa-check"></i><b>6.2.1</b> Basic Principle of Counting</a></li>
<li class="chapter" data-level="6.2.2" data-path="probability.html"><a href="probability.html#permutations"><i class="fa fa-check"></i><b>6.2.2</b> Permutations</a></li>
<li class="chapter" data-level="6.2.3" data-path="probability.html"><a href="probability.html#combinations"><i class="fa fa-check"></i><b>6.2.3</b> Combinations</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="probability.html"><a href="probability.html#axioms-of-probability"><i class="fa fa-check"></i><b>6.3</b> Axioms of Probability</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="probability.html"><a href="probability.html#beyond-the-law-of-sample-spaces"><i class="fa fa-check"></i><b>6.3.1</b> Beyond the Law of Sample Spaces</a></li>
<li class="chapter" data-level="6.3.2" data-path="probability.html"><a href="probability.html#set-theory"><i class="fa fa-check"></i><b>6.3.2</b> Set Theory</a></li>
<li class="chapter" data-level="6.3.3" data-path="probability.html"><a href="probability.html#the-axioms-of-probability"><i class="fa fa-check"></i><b>6.3.3</b> The Axioms of Probability</a></li>
<li class="chapter" data-level="6.3.4" data-path="probability.html"><a href="probability.html#the-or-rule"><i class="fa fa-check"></i><b>6.3.4</b> The OR Rule</a></li>
<li class="chapter" data-level="6.3.5" data-path="probability.html"><a href="probability.html#the-and-rule"><i class="fa fa-check"></i><b>6.3.5</b> The AND Rule</a></li>
<li class="chapter" data-level="6.3.6" data-path="probability.html"><a href="probability.html#the-complement-rule"><i class="fa fa-check"></i><b>6.3.6</b> The Complement Rule</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="probability.html"><a href="probability.html#conditional-probability-and-independence"><i class="fa fa-check"></i><b>6.4</b> Conditional Probability and Independence</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="probability.html"><a href="probability.html#introduction-1"><i class="fa fa-check"></i><b>6.4.1</b> Introduction</a></li>
<li class="chapter" data-level="6.4.2" data-path="probability.html"><a href="probability.html#mathematical-definition"><i class="fa fa-check"></i><b>6.4.2</b> Mathematical Definition</a></li>
<li class="chapter" data-level="6.4.3" data-path="probability.html"><a href="probability.html#independence"><i class="fa fa-check"></i><b>6.4.3</b> Independence</a></li>
<li class="chapter" data-level="6.4.4" data-path="probability.html"><a href="probability.html#multiplicative-rule"><i class="fa fa-check"></i><b>6.4.4</b> Multiplicative Rule</a></li>
<li class="chapter" data-level="6.4.5" data-path="probability.html"><a href="probability.html#law-of-total-probability"><i class="fa fa-check"></i><b>6.4.5</b> Law of Total Probability</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="probability.html"><a href="probability.html#bayes-rule"><i class="fa fa-check"></i><b>6.5</b> Bayes Rule</a></li>
<li class="chapter" data-level="6.6" data-path="probability.html"><a href="probability.html#homework-4"><i class="fa fa-check"></i><b>6.6</b> Homework</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="probability.html"><a href="probability.html#concept-questions-4"><i class="fa fa-check"></i><b>6.6.1</b> Concept Questions</a></li>
<li class="chapter" data-level="6.6.2" data-path="probability.html"><a href="probability.html#practice-problems-4"><i class="fa fa-check"></i><b>6.6.2</b> Practice Problems</a></li>
<li class="chapter" data-level="6.6.3" data-path="probability.html"><a href="probability.html#advanced-problems-4"><i class="fa fa-check"></i><b>6.6.3</b> Advanced Problems</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html"><i class="fa fa-check"></i><b>7</b> Discrete Random Variables</a>
<ul>
<li class="chapter" data-level="7.1" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html#random-variables"><i class="fa fa-check"></i><b>7.1</b> Random Variables</a></li>
<li class="chapter" data-level="7.2" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html#probability-distributions-for-discrete-random-variables"><i class="fa fa-check"></i><b>7.2</b> Probability Distributions for Discrete Random Variables</a></li>
<li class="chapter" data-level="7.3" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html#properties-of-probability-distributions"><i class="fa fa-check"></i><b>7.3</b> Properties of Probability Distributions</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html#expected-values-of-discrete-random-variables"><i class="fa fa-check"></i><b>7.3.1</b> Expected Values of Discrete Random Variables</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html#expected-value-of-sums-of-random-variables"><i class="fa fa-check"></i><b>7.4</b> Expected Value of Sums of Random Variables</a></li>
<li class="chapter" data-level="7.5" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html#variance-of-random-variables"><i class="fa fa-check"></i><b>7.5</b> Variance of Random Variables</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html#variance-of-sums-of-random-variables"><i class="fa fa-check"></i><b>7.5.1</b> Variance of Sums of Random Variables</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html#bernoulli-random-variables"><i class="fa fa-check"></i><b>7.6</b> Bernoulli Random Variables</a></li>
<li class="chapter" data-level="7.7" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html#binomial-random-variables"><i class="fa fa-check"></i><b>7.7</b> Binomial Random Variables</a></li>
<li class="chapter" data-level="7.8" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html#binomial-random-variable-in-r"><i class="fa fa-check"></i><b>7.8</b> Binomial Random Variable in R</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html#probability-distribution-in-r"><i class="fa fa-check"></i><b>7.8.1</b> Probability Distribution in R</a></li>
<li class="chapter" data-level="7.8.2" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html#cumulative-distribution-calculations-in-r"><i class="fa fa-check"></i><b>7.8.2</b> Cumulative Distribution Calculations in R</a></li>
<li class="chapter" data-level="7.8.3" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html#random-binomial-distribution-in-r"><i class="fa fa-check"></i><b>7.8.3</b> Random Binomial Distribution in R</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html#homework-5"><i class="fa fa-check"></i><b>7.9</b> Homework</a>
<ul>
<li class="chapter" data-level="7.9.1" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html#concept-questions-5"><i class="fa fa-check"></i><b>7.9.1</b> Concept Questions:</a></li>
<li class="chapter" data-level="7.9.2" data-path="discrete-random-variables.html"><a href="discrete-random-variables.html#advanced-problems-5"><i class="fa fa-check"></i><b>7.9.2</b> Advanced Problems:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="continuous-random-variables.html"><a href="continuous-random-variables.html"><i class="fa fa-check"></i><b>8</b> Continuous Random Variables</a>
<ul>
<li class="chapter" data-level="8.1" data-path="continuous-random-variables.html"><a href="continuous-random-variables.html#introduction-to-continuous-random-variables"><i class="fa fa-check"></i><b>8.1</b> Introduction to Continuous Random Variables</a></li>
<li class="chapter" data-level="8.2" data-path="continuous-random-variables.html"><a href="continuous-random-variables.html#uniform-random-variable"><i class="fa fa-check"></i><b>8.2</b> Uniform Random Variable</a></li>
<li class="chapter" data-level="8.3" data-path="continuous-random-variables.html"><a href="continuous-random-variables.html#normal-distribution"><i class="fa fa-check"></i><b>8.3</b> Normal Distribution</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="continuous-random-variables.html"><a href="continuous-random-variables.html#cumulative-distribution-function-cdf-for-normal-random-variables"><i class="fa fa-check"></i><b>8.3.1</b> Cumulative Distribution Function (CDF) for Normal Random Variables</a></li>
<li class="chapter" data-level="8.3.2" data-path="continuous-random-variables.html"><a href="continuous-random-variables.html#finding-probabilities-for-the-normal-distribution"><i class="fa fa-check"></i><b>8.3.2</b> Finding Probabilities for the Normal Distribution</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="continuous-random-variables.html"><a href="continuous-random-variables.html#standard-normal-distribution-z"><i class="fa fa-check"></i><b>8.4</b> Standard Normal Distribution (<span class="math inline">\(Z\)</span>)</a></li>
<li class="chapter" data-level="8.5" data-path="continuous-random-variables.html"><a href="continuous-random-variables.html#assessing-normality"><i class="fa fa-check"></i><b>8.5</b> Assessing Normality</a></li>
<li class="chapter" data-level="8.6" data-path="continuous-random-variables.html"><a href="continuous-random-variables.html#regression-to-the-mean"><i class="fa fa-check"></i><b>8.6</b> Regression to the Mean</a></li>
<li class="chapter" data-level="8.7" data-path="continuous-random-variables.html"><a href="continuous-random-variables.html#final-thoughts-on-random-variables"><i class="fa fa-check"></i><b>8.7</b> Final Thoughts on Random Variables</a></li>
<li class="chapter" data-level="8.8" data-path="continuous-random-variables.html"><a href="continuous-random-variables.html#homework-6"><i class="fa fa-check"></i><b>8.8</b> Homework</a></li>
</ul></li>
<li class="part"><span><b>III Sampling and Confidence Intervals</b></span></li>
<li class="chapter" data-level="9" data-path="introduction-to-sampling-distributions.html"><a href="introduction-to-sampling-distributions.html"><i class="fa fa-check"></i><b>9</b> Introduction to Sampling Distributions</a>
<ul>
<li class="chapter" data-level="9.1" data-path="introduction-to-sampling-distributions.html"><a href="introduction-to-sampling-distributions.html#why-sample"><i class="fa fa-check"></i><b>9.1</b> Why Sample?</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="introduction-to-sampling-distributions.html"><a href="introduction-to-sampling-distributions.html#average-height-example"><i class="fa fa-check"></i><b>9.1.1</b> Average Height Example</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="introduction-to-sampling-distributions.html"><a href="introduction-to-sampling-distributions.html#inferences-and-point-estimators"><i class="fa fa-check"></i><b>9.2</b> Inferences and Point Estimators</a></li>
<li class="chapter" data-level="9.3" data-path="introduction-to-sampling-distributions.html"><a href="introduction-to-sampling-distributions.html#the-distribution-of-sample-means"><i class="fa fa-check"></i><b>9.3</b> The Distribution of Sample Means</a></li>
<li class="chapter" data-level="9.4" data-path="introduction-to-sampling-distributions.html"><a href="introduction-to-sampling-distributions.html#distribution-of-sample-means"><i class="fa fa-check"></i><b>9.4</b> Distribution of Sample Means</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="introduction-to-sampling-distributions.html"><a href="introduction-to-sampling-distributions.html#the-central-limit-theorem"><i class="fa fa-check"></i><b>9.4.1</b> The Central Limit Theorem</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="introduction-to-sampling-distributions.html"><a href="introduction-to-sampling-distributions.html#other-point-estimators"><i class="fa fa-check"></i><b>9.5</b> Other Point Estimators</a></li>
<li class="chapter" data-level="9.6" data-path="introduction-to-sampling-distributions.html"><a href="introduction-to-sampling-distributions.html#sampling-distribution-for-the-sample-proportion"><i class="fa fa-check"></i><b>9.6</b> Sampling Distribution for the Sample Proportion</a></li>
<li class="chapter" data-level="9.7" data-path="introduction-to-sampling-distributions.html"><a href="introduction-to-sampling-distributions.html#tales-in-sampling-poincares-baker"><i class="fa fa-check"></i><b>9.7</b> Tales in Sampling: Poincare’s Baker</a></li>
<li class="chapter" data-level="9.8" data-path="introduction-to-sampling-distributions.html"><a href="introduction-to-sampling-distributions.html#homework-7"><i class="fa fa-check"></i><b>9.8</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="confidence-intervals.html"><a href="confidence-intervals.html"><i class="fa fa-check"></i><b>10</b> Confidence Intervals</a>
<ul>
<li class="chapter" data-level="10.1" data-path="confidence-intervals.html"><a href="confidence-intervals.html#introduction-nyc-flights-dataset"><i class="fa fa-check"></i><b>10.1</b> Introduction NYC Flights Dataset</a></li>
<li class="chapter" data-level="10.2" data-path="confidence-intervals.html"><a href="confidence-intervals.html#mean-flight-delays"><i class="fa fa-check"></i><b>10.2</b> Mean Flight Delays</a></li>
<li class="chapter" data-level="10.3" data-path="confidence-intervals.html"><a href="confidence-intervals.html#shortcut-using-the-central-limit-theorem"><i class="fa fa-check"></i><b>10.3</b> Shortcut Using the Central Limit Theorem</a></li>
<li class="chapter" data-level="10.4" data-path="confidence-intervals.html"><a href="confidence-intervals.html#additional-practice-comparing-airports"><i class="fa fa-check"></i><b>10.4</b> Additional Practice: Comparing Airports</a></li>
<li class="chapter" data-level="10.5" data-path="confidence-intervals.html"><a href="confidence-intervals.html#population-proportion-confidence-intervals"><i class="fa fa-check"></i><b>10.5</b> Population Proportion Confidence Intervals</a></li>
<li class="chapter" data-level="10.6" data-path="confidence-intervals.html"><a href="confidence-intervals.html#extra-practice-problems"><i class="fa fa-check"></i><b>10.6</b> Extra Practice Problems</a></li>
<li class="chapter" data-level="10.7" data-path="confidence-intervals.html"><a href="confidence-intervals.html#homework-8"><i class="fa fa-check"></i><b>10.7</b> Homework</a></li>
</ul></li>
<li class="part"><span><b>IV Regression</b></span></li>
<li class="chapter" data-level="11" data-path="introduction-to-linear-regression.html"><a href="introduction-to-linear-regression.html"><i class="fa fa-check"></i><b>11</b> Introduction to Linear Regression</a>
<ul>
<li class="chapter" data-level="11.1" data-path="introduction-to-linear-regression.html"><a href="introduction-to-linear-regression.html#statistical-models"><i class="fa fa-check"></i><b>11.1</b> Statistical Models</a></li>
<li class="chapter" data-level="11.2" data-path="introduction-to-linear-regression.html"><a href="introduction-to-linear-regression.html#fitting-a-linear-model-in-r"><i class="fa fa-check"></i><b>11.2</b> Fitting a Linear Model in R</a></li>
<li class="chapter" data-level="11.3" data-path="introduction-to-linear-regression.html"><a href="introduction-to-linear-regression.html#assumptions-of-linear-regression"><i class="fa fa-check"></i><b>11.3</b> Assumptions of Linear Regression</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="introduction-to-linear-regression.html"><a href="introduction-to-linear-regression.html#successful-linear-regression"><i class="fa fa-check"></i><b>11.3.1</b> Successful Linear Regression</a></li>
<li class="chapter" data-level="11.3.2" data-path="introduction-to-linear-regression.html"><a href="introduction-to-linear-regression.html#what-failure-looks-like"><i class="fa fa-check"></i><b>11.3.2</b> What Failure Looks Like</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="introduction-to-linear-regression.html"><a href="introduction-to-linear-regression.html#goodness-of-fit"><i class="fa fa-check"></i><b>11.4</b> Goodness of Fit</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="introduction-to-linear-regression.html"><a href="introduction-to-linear-regression.html#correlation-and-slope"><i class="fa fa-check"></i><b>11.4.1</b> Correlation and Slope</a></li>
<li class="chapter" data-level="11.4.2" data-path="introduction-to-linear-regression.html"><a href="introduction-to-linear-regression.html#r2-coefficient-of-determination-and-measuring-model-fits"><i class="fa fa-check"></i><b>11.4.2</b> <span class="math inline">\(R^2\)</span> Coefficient of Determination and Measuring Model Fits</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="introduction-to-linear-regression.html"><a href="introduction-to-linear-regression.html#using-regression-models-to-make-predictions"><i class="fa fa-check"></i><b>11.5</b> Using Regression Models to Make Predictions</a></li>
<li class="chapter" data-level="11.6" data-path="introduction-to-linear-regression.html"><a href="introduction-to-linear-regression.html#homework-9"><i class="fa fa-check"></i><b>11.6</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="regression-with-categorical-variables.html"><a href="regression-with-categorical-variables.html"><i class="fa fa-check"></i><b>12</b> Regression with Categorical Variables</a>
<ul>
<li class="chapter" data-level="12.1" data-path="regression-with-categorical-variables.html"><a href="regression-with-categorical-variables.html#introduction-2"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="regression-with-categorical-variables.html"><a href="regression-with-categorical-variables.html#one-hot-encoding"><i class="fa fa-check"></i><b>12.2</b> One Hot Encoding</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="regression-with-categorical-variables.html"><a href="regression-with-categorical-variables.html#example-exercise-and-weight"><i class="fa fa-check"></i><b>12.2.1</b> Example: Exercise and Weight</a></li>
<li class="chapter" data-level="12.2.2" data-path="regression-with-categorical-variables.html"><a href="regression-with-categorical-variables.html#housing-prices-by-neighborhood"><i class="fa fa-check"></i><b>12.2.2</b> Housing Prices by Neighborhood</a></li>
<li class="chapter" data-level="12.2.3" data-path="regression-with-categorical-variables.html"><a href="regression-with-categorical-variables.html#advanced-exercise-and-gender-together"><i class="fa fa-check"></i><b>12.2.3</b> Advanced: Exercise and Gender Together</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="regression-with-categorical-variables.html"><a href="regression-with-categorical-variables.html#diagnostics"><i class="fa fa-check"></i><b>12.3</b> Diagnostics</a></li>
<li class="chapter" data-level="12.4" data-path="regression-with-categorical-variables.html"><a href="regression-with-categorical-variables.html#homework-10"><i class="fa fa-check"></i><b>12.4</b> Homework</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="regression-with-categorical-variables.html"><a href="regression-with-categorical-variables.html#concept-questions-9"><i class="fa fa-check"></i><b>12.4.1</b> Concept Questions</a></li>
<li class="chapter" data-level="12.4.2" data-path="regression-with-categorical-variables.html"><a href="regression-with-categorical-variables.html#practice-problems-10"><i class="fa fa-check"></i><b>12.4.2</b> Practice Problems</a></li>
<li class="chapter" data-level="12.4.3" data-path="regression-with-categorical-variables.html"><a href="regression-with-categorical-variables.html#advanced-problems-10"><i class="fa fa-check"></i><b>12.4.3</b> Advanced Problems</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="multiple-regression-models.html"><a href="multiple-regression-models.html"><i class="fa fa-check"></i><b>13</b> Multiple Regression Models</a>
<ul>
<li class="chapter" data-level="13.1" data-path="multiple-regression-models.html"><a href="multiple-regression-models.html#introduction-to-multiple-regression-models"><i class="fa fa-check"></i><b>13.1</b> Introduction to Multiple Regression Models</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="multiple-regression-models.html"><a href="multiple-regression-models.html#housing-prices-review-of-simple-regression-results"><i class="fa fa-check"></i><b>13.1.1</b> Housing Prices (Review of Simple Regression Results)</a></li>
<li class="chapter" data-level="13.1.2" data-path="multiple-regression-models.html"><a href="multiple-regression-models.html#multiple-regression-including-bathrooms"><i class="fa fa-check"></i><b>13.1.2</b> Multiple Regression (Including Bathrooms)</a></li>
<li class="chapter" data-level="13.1.3" data-path="multiple-regression-models.html"><a href="multiple-regression-models.html#diagnostics-for-multiple-linear-regression"><i class="fa fa-check"></i><b>13.1.3</b> Diagnostics for Multiple Linear Regression</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="multiple-regression-models.html"><a href="multiple-regression-models.html#multiple-regression-with-categorical-variables-including-the-neighborhood"><i class="fa fa-check"></i><b>13.2</b> Multiple Regression with Categorical Variables: Including the Neighborhood</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="multiple-regression-models.html"><a href="multiple-regression-models.html#predictions"><i class="fa fa-check"></i><b>13.2.1</b> Predictions</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="multiple-regression-models.html"><a href="multiple-regression-models.html#interactions-between-variables"><i class="fa fa-check"></i><b>13.3</b> Interactions between Variables</a></li>
<li class="chapter" data-level="13.4" data-path="multiple-regression-models.html"><a href="multiple-regression-models.html#some-pitfalls-in-multiple-regression"><i class="fa fa-check"></i><b>13.4</b> Some Pitfalls in Multiple Regression</a></li>
<li class="chapter" data-level="13.5" data-path="multiple-regression-models.html"><a href="multiple-regression-models.html#homework-11"><i class="fa fa-check"></i><b>13.5</b> Homework</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="multiple-regression-models.html"><a href="multiple-regression-models.html#concept-questions-10"><i class="fa fa-check"></i><b>13.5.1</b> Concept Questions</a></li>
<li class="chapter" data-level="13.5.2" data-path="multiple-regression-models.html"><a href="multiple-regression-models.html#practice-problems-11"><i class="fa fa-check"></i><b>13.5.2</b> Practice Problems</a></li>
<li class="chapter" data-level="13.5.3" data-path="multiple-regression-models.html"><a href="multiple-regression-models.html#advanced-problems-11"><i class="fa fa-check"></i><b>13.5.3</b> Advanced Problems</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Hypothesis Testing</b></span></li>
<li class="chapter" data-level="14" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html"><i class="fa fa-check"></i><b>14</b> Hypothesis Testing: One Sample</a>
<ul>
<li class="chapter" data-level="14.1" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#introduction-and-warning"><i class="fa fa-check"></i><b>14.1</b> Introduction and Warning</a></li>
<li class="chapter" data-level="14.2" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#a-starting-example"><i class="fa fa-check"></i><b>14.2</b> A Starting Example</a></li>
<li class="chapter" data-level="14.3" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#the-t.test-command-hypothesis-tests-for-the-population-mean-mu"><i class="fa fa-check"></i><b>14.3</b> The t.test command: Hypothesis Tests for the Population Mean <span class="math inline">\(\mu\)</span></a></li>
<li class="chapter" data-level="14.4" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#theory-of-hypothesis-testing"><i class="fa fa-check"></i><b>14.4</b> Theory of Hypothesis Testing</a></li>
<li class="chapter" data-level="14.5" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#under-the-hood-t-tests"><i class="fa fa-check"></i><b>14.5</b> Under the Hood (t tests)</a></li>
<li class="chapter" data-level="14.6" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#errors-in-hypothesis-testing"><i class="fa fa-check"></i><b>14.6</b> Errors in Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="14.6.1" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#statistical-significance-alpha"><i class="fa fa-check"></i><b>14.6.1</b> Statistical Significance (<span class="math inline">\(\alpha\)</span>)</a></li>
<li class="chapter" data-level="14.6.2" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#type-ii-error"><i class="fa fa-check"></i><b>14.6.2</b> Type II Error</a></li>
<li class="chapter" data-level="14.6.3" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#practical-significance-versus-statistical-significance"><i class="fa fa-check"></i><b>14.6.3</b> Practical Significance versus Statistical Significance</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#hypothesis-testing-for-population-fraction"><i class="fa fa-check"></i><b>14.7</b> Hypothesis Testing for Population Fraction</a>
<ul>
<li class="chapter" data-level="14.7.1" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#example-3"><i class="fa fa-check"></i><b>14.7.1</b> Example:</a></li>
</ul></li>
<li class="chapter" data-level="14.8" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#hypothesis-testing-in-linear-regression"><i class="fa fa-check"></i><b>14.8</b> Hypothesis Testing in Linear Regression</a></li>
<li class="chapter" data-level="14.9" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#power-of-a-statistical-test"><i class="fa fa-check"></i><b>14.9</b> Power of a Statistical Test</a></li>
<li class="chapter" data-level="14.10" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#homework-12"><i class="fa fa-check"></i><b>14.10</b> Homework</a>
<ul>
<li class="chapter" data-level="14.10.1" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#concept-questions-11"><i class="fa fa-check"></i><b>14.10.1</b> Concept Questions:</a></li>
<li class="chapter" data-level="14.10.2" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#practice-problems-12"><i class="fa fa-check"></i><b>14.10.2</b> Practice Problems:</a></li>
<li class="chapter" data-level="14.10.3" data-path="hypothesis-testing-one-sample.html"><a href="hypothesis-testing-one-sample.html#advanced-problems-12"><i class="fa fa-check"></i><b>14.10.3</b> Advanced Problems</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="hypothesis-testing-two-sample-tests.html"><a href="hypothesis-testing-two-sample-tests.html"><i class="fa fa-check"></i><b>15</b> Hypothesis Testing: Two Sample Tests</a>
<ul>
<li class="chapter" data-level="15.1" data-path="hypothesis-testing-two-sample-tests.html"><a href="hypothesis-testing-two-sample-tests.html#two-sample-t-test"><i class="fa fa-check"></i><b>15.1</b> Two Sample t test</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="hypothesis-testing-two-sample-tests.html"><a href="hypothesis-testing-two-sample-tests.html#regression-analysis"><i class="fa fa-check"></i><b>15.1.1</b> Regression analysis</a></li>
<li class="chapter" data-level="15.1.2" data-path="hypothesis-testing-two-sample-tests.html"><a href="hypothesis-testing-two-sample-tests.html#two-sample-t-test-approach"><i class="fa fa-check"></i><b>15.1.2</b> Two Sample t test approach</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="hypothesis-testing-two-sample-tests.html"><a href="hypothesis-testing-two-sample-tests.html#two-sample-proportion-tests"><i class="fa fa-check"></i><b>15.2</b> Two Sample Proportion Tests</a></li>
<li class="chapter" data-level="15.3" data-path="hypothesis-testing-two-sample-tests.html"><a href="hypothesis-testing-two-sample-tests.html#extra-example-birth-weights-and-smoking"><i class="fa fa-check"></i><b>15.3</b> Extra Example: Birth Weights and Smoking</a></li>
<li class="chapter" data-level="15.4" data-path="hypothesis-testing-two-sample-tests.html"><a href="hypothesis-testing-two-sample-tests.html#homework-13"><i class="fa fa-check"></i><b>15.4</b> Homework</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="hypothesis-testing-two-sample-tests.html"><a href="hypothesis-testing-two-sample-tests.html#concept-questions-12"><i class="fa fa-check"></i><b>15.4.1</b> Concept Questions</a></li>
<li class="chapter" data-level="15.4.2" data-path="hypothesis-testing-two-sample-tests.html"><a href="hypothesis-testing-two-sample-tests.html#practice-problems-13"><i class="fa fa-check"></i><b>15.4.2</b> Practice Problems</a></li>
<li class="chapter" data-level="15.4.3" data-path="hypothesis-testing-two-sample-tests.html"><a href="hypothesis-testing-two-sample-tests.html#advanced-problems-13"><i class="fa fa-check"></i><b>15.4.3</b> Advanced Problems</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="confidence-intervals-and-hypothesis-testing.html"><a href="confidence-intervals-and-hypothesis-testing.html"><i class="fa fa-check"></i><b>16</b> Confidence Intervals and Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="16.1" data-path="confidence-intervals-and-hypothesis-testing.html"><a href="confidence-intervals-and-hypothesis-testing.html#relation-to-confidence-intervals"><i class="fa fa-check"></i><b>16.1</b> Relation to Confidence Intervals</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="confidence-intervals-and-hypothesis-testing.html"><a href="confidence-intervals-and-hypothesis-testing.html#two-sided-tests"><i class="fa fa-check"></i><b>16.1.1</b> Two sided tests</a></li>
<li class="chapter" data-level="16.1.2" data-path="confidence-intervals-and-hypothesis-testing.html"><a href="confidence-intervals-and-hypothesis-testing.html#one-sided-confidence-intervals"><i class="fa fa-check"></i><b>16.1.2</b> One-sided confidence intervals</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="introduction-to-the-chi-square-test.html"><a href="introduction-to-the-chi-square-test.html"><i class="fa fa-check"></i><b>17</b> Introduction to the Chi Square Test</a>
<ul>
<li class="chapter" data-level="17.1" data-path="introduction-to-the-chi-square-test.html"><a href="introduction-to-the-chi-square-test.html#contingency-tables"><i class="fa fa-check"></i><b>17.1</b> Contingency Tables</a></li>
<li class="chapter" data-level="17.2" data-path="introduction-to-the-chi-square-test.html"><a href="introduction-to-the-chi-square-test.html#chi-square-test"><i class="fa fa-check"></i><b>17.2</b> Chi Square Test</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="introduction-to-the-chi-square-test.html"><a href="introduction-to-the-chi-square-test.html#conditions-for-using-the-chi2-test"><i class="fa fa-check"></i><b>17.2.1</b> Conditions for Using the <span class="math inline">\(\chi^2\)</span> test</a></li>
<li class="chapter" data-level="17.2.2" data-path="introduction-to-the-chi-square-test.html"><a href="introduction-to-the-chi-square-test.html#multiple-hypothesis-testing-again"><i class="fa fa-check"></i><b>17.2.2</b> Multiple Hypothesis Testing Again</a></li>
<li class="chapter" data-level="17.2.3" data-path="introduction-to-the-chi-square-test.html"><a href="introduction-to-the-chi-square-test.html#using-a-different-null-hypothesis"><i class="fa fa-check"></i><b>17.2.3</b> Using a different Null Hypothesis</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="introduction-to-the-chi-square-test.html"><a href="introduction-to-the-chi-square-test.html#homework-14"><i class="fa fa-check"></i><b>17.3</b> Homework</a></li>
</ul></li>
<li class="part"><span><b>VI Advanced Regression Topics</b></span></li>
<li class="chapter" data-level="18" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>18</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="18.1" data-path="logistic-regression.html"><a href="logistic-regression.html#what-is-logistic-regression-used-for"><i class="fa fa-check"></i><b>18.1</b> What is logistic regression used for?</a></li>
<li class="chapter" data-level="18.2" data-path="logistic-regression.html"><a href="logistic-regression.html#glm-generalized-linear-models"><i class="fa fa-check"></i><b>18.2</b> GLM: Generalized Linear Models</a></li>
<li class="chapter" data-level="18.3" data-path="logistic-regression.html"><a href="logistic-regression.html#a-starting-example-1"><i class="fa fa-check"></i><b>18.3</b> A Starting Example</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="logistic-regression.html"><a href="logistic-regression.html#confidence-intervals-for-the-parameters"><i class="fa fa-check"></i><b>18.3.1</b> Confidence Intervals for the Parameters</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="logistic-regression.html"><a href="logistic-regression.html#equivalence-of-logistic-regression-and-proportion-tests"><i class="fa fa-check"></i><b>18.4</b> Equivalence of Logistic Regression and Proportion Tests</a></li>
<li class="chapter" data-level="18.5" data-path="logistic-regression.html"><a href="logistic-regression.html#example-building-a-more-accurate-model"><i class="fa fa-check"></i><b>18.5</b> Example: Building a More Accurate Model</a></li>
<li class="chapter" data-level="18.6" data-path="logistic-regression.html"><a href="logistic-regression.html#example-measuring-team-defense-using-logistic-regression"><i class="fa fa-check"></i><b>18.6</b> Example: Measuring Team Defense Using Logistic Regression</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Statistics and Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-wrangling" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Data Wrangling<a href="data-wrangling.html#data-wrangling" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="what-is-data-wrangling" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> What is Data Wrangling?<a href="data-wrangling.html#what-is-data-wrangling" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Usually data sets require some work to extract the answers we are looking for. This is especially true for modern data sets which can be extremely large. These techniques are called <strong>data wrangling</strong>.</p>
<p>In these notes we will learn how to use the R library <code>dplyr</code> to extract information from data sets. You can load this library in R using the command:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="data-wrangling.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<p>It may print some warnings, but you don’t need to worry about these.</p>
</div>
<div id="nas-and-the-curse-of-real-world-data" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> NA’s and the Curse of Real World Data<a href="data-wrangling.html#nas-and-the-curse-of-real-world-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In real data sets we will often run into an issue where some of the data is missing. This can occur for a variety of reasons. For example, for scientific data the recorder may have messed up and not recorded that particular piece of data for some reason. If we were measuring lizard tail lengths and a lizard had lost its tail we would not have anything to record for that piece of data. In survey data the person filling out the survey may have skipped that question for some reason, etc. Yet another reason might be that a column only makes sense to answer if your answer to a previous entry takes on a particular value. If you are recording information about your employees in a spreadsheet the column child.ages only makes sense if the column has.children is true.</p>
<p>Whatever the reasons behind it, when you are working with real-life data you will encounter this issue. <code>R</code> knows about these issues and uses a special term for missing data, “NA”. Whenever a piece of data is missing from a data set it will appear as an NA in the data set.</p>
<p>Many ways exist for dealing with the issue of missing data. The simplest method however is to just remove the data where we are missing some component. For this we can use the <code>na.omit</code> function in <code>R</code>. This function just removes all rows in the data set where one or more of the columns is missing a value.</p>
<p>As an example lets consider the <code>animal_sleep</code> data set.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="data-wrangling.html#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;animal_sleep&quot;</span>)</span>
<span id="cb181-2"><a href="data-wrangling.html#cb181-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(animal_sleep)</span></code></pre></div>
<pre><code>##                         name      genus  vore        order conservation
## 1                    Cheetah   Acinonyx carni    Carnivora           lc
## 2                 Owl monkey      Aotus  omni     Primates         &lt;NA&gt;
## 3            Mountain beaver Aplodontia herbi     Rodentia           nt
## 4 Greater short-tailed shrew    Blarina  omni Soricomorpha           lc
## 5                        Cow        Bos herbi Artiodactyla domesticated
## 6           Three-toed sloth   Bradypus herbi       Pilosa         &lt;NA&gt;
##   sleep_total sleep_rem sleep_cycle awake brainwt  bodywt
## 1        12.1        NA          NA  11.9      NA  50.000
## 2        17.0       1.8          NA   7.0 0.01550   0.480
## 3        14.4       2.4          NA   9.6      NA   1.350
## 4        14.9       2.3   0.1333333   9.1 0.00029   0.019
## 5         4.0       0.7   0.6666667  20.0 0.42300 600.000
## 6        14.4       2.2   0.7666667   9.6      NA   3.850</code></pre>
<p>Notice the missing values appear as NA’s. We can see the dimensions of the data frame using the dim command:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="data-wrangling.html#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(animal_sleep)</span></code></pre></div>
<pre><code>## [1] 83 11</code></pre>
<p>So we have data for 83 species and 11 columns of information. To remove the NA’s from this data set we can use the <code>na.omit</code> command:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="data-wrangling.html#cb185-1" aria-hidden="true" tabindex="-1"></a>trim_animal<span class="ot">=</span><span class="fu">na.omit</span>(animal_sleep)</span>
<span id="cb185-2"><a href="data-wrangling.html#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(trim_animal)</span></code></pre></div>
<pre><code>##                          name      genus  vore        order conservation
## 4  Greater short-tailed shrew    Blarina  omni Soricomorpha           lc
## 5                         Cow        Bos herbi Artiodactyla domesticated
## 9                         Dog      Canis carni    Carnivora domesticated
## 12                 Guinea pig      Cavis herbi     Rodentia domesticated
## 14                 Chinchilla Chinchilla herbi     Rodentia domesticated
## 17  Lesser short-tailed shrew  Cryptotis  omni Soricomorpha           lc
##    sleep_total sleep_rem sleep_cycle awake brainwt  bodywt
## 4         14.9       2.3   0.1333333   9.1 0.00029   0.019
## 5          4.0       0.7   0.6666667  20.0 0.42300 600.000
## 9         10.1       2.9   0.3333333  13.9 0.07000  14.000
## 12         9.4       0.8   0.2166667  14.6 0.00550   0.728
## 14        12.5       1.5   0.1166667  11.5 0.00640   0.420
## 17         9.1       1.4   0.1500000  14.9 0.00014   0.005</code></pre>
<p>Notice the NA’s have disappeared. However, we have gotten rid of most of the rows:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="data-wrangling.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(trim_animal)</span></code></pre></div>
<pre><code>## [1] 20 11</code></pre>
<p>Next we will see how we can use the select command to avoid dropping rows that we could have kept.</p>
</div>
<div id="select-pick-only-a-few-columns" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Select: Pick only a few columns<a href="data-wrangling.html#select-pick-only-a-few-columns" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Our primary data set in these notes will be the <code>nflplays</code> data set.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="data-wrangling.html#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;nflplays&quot;</span>)</span></code></pre></div>
<p>This data set has data for over 275 thousands plays during NFL (football) games from 2009-2017. For each play we have recorded 43 pieces of information:</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="data-wrangling.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(nflplays)</span></code></pre></div>
<pre><code>##  [1] &quot;Date&quot;               &quot;GameID&quot;             &quot;Drive&quot;             
##  [4] &quot;qtr&quot;                &quot;down&quot;               &quot;time&quot;              
##  [7] &quot;PlayTimeDiff&quot;       &quot;yrdline100&quot;         &quot;ydstogo&quot;           
## [10] &quot;ydsnet&quot;             &quot;GoalToGo&quot;           &quot;posteam&quot;           
## [13] &quot;DefensiveTeam&quot;      &quot;Yards.Gained&quot;       &quot;sp&quot;                
## [16] &quot;Touchdown&quot;          &quot;Safety&quot;             &quot;PlayType&quot;          
## [19] &quot;Passer&quot;             &quot;PassOutcome&quot;        &quot;PassLength&quot;        
## [22] &quot;AirYards&quot;           &quot;YardsAfterCatch&quot;    &quot;QBHit&quot;             
## [25] &quot;PassLocation&quot;       &quot;InterceptionThrown&quot; &quot;Interceptor&quot;       
## [28] &quot;Rusher&quot;             &quot;RunLocation&quot;        &quot;RunGap&quot;            
## [31] &quot;Receiver&quot;           &quot;Reception&quot;          &quot;Fumble&quot;            
## [34] &quot;RecFumbTeam&quot;        &quot;Sack&quot;               &quot;PosTeamScore&quot;      
## [37] &quot;DefTeamScore&quot;       &quot;ScoreDiff&quot;          &quot;AbsScoreDiff&quot;      
## [40] &quot;HomeTeam&quot;           &quot;AwayTeam&quot;           &quot;Season&quot;            
## [43] &quot;play.description&quot;</code></pre>
<p>You will want to use the help page to look up what a column actually stores <code>?nflplays</code></p>
<p>For large data sets we may not be interested in all of the columns present in the data. We get only the ones we are interested in we can use the <code>select</code> command from <code>dplyr</code>. For example, if we are only interested in the Team and the Yards.Gained columns we can <code>select</code> those from our huge data frame:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="data-wrangling.html#cb192-1" aria-hidden="true" tabindex="-1"></a>team.offense<span class="ot">=</span>dplyr<span class="sc">::</span><span class="fu">select</span>(nflplays,posteam,Yards.Gained) <span class="do">##Grab just the columns posteam and Yards.Gained</span></span>
<span id="cb192-2"><a href="data-wrangling.html#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(team.offense) <span class="do">##Look at the first few rows in our new data </span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##   posteam Yards.Gained
##   &lt;fct&gt;          &lt;int&gt;
## 1 PIT                5
## 2 PIT               -3
## 3 PIT                0
## 4 TEN                0
## 5 TEN                4
## 6 TEN               -2</code></pre>
<p>You can also grab a range of columns using the select command. For example, if we want only the columns from Date to Yard.Gained in the nflplays data set we could use:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="data-wrangling.html#cb194-1" aria-hidden="true" tabindex="-1"></a>test12<span class="ot">=</span><span class="fu">select</span>(nflplays, Date<span class="sc">:</span>Yards.Gained) <span class="do">##get columns from Date to Yards.Gained</span></span>
<span id="cb194-2"><a href="data-wrangling.html#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(test12)</span></code></pre></div>
<p>You can put multiple selectors into your command without issue. For example, if we want the Date through Yards.Gained and the Season column you can use:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="data-wrangling.html#cb195-1" aria-hidden="true" tabindex="-1"></a>test<span class="ot">=</span>dplyr<span class="sc">::</span><span class="fu">select</span>(nflplays, Date<span class="sc">:</span>Yards.Gained, Season) <span class="do">##get columns from Date to Yards.Gained</span></span>
<span id="cb195-2"><a href="data-wrangling.html#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(test)</span></code></pre></div>
<pre><code>##  [1] &quot;Date&quot;          &quot;GameID&quot;        &quot;Drive&quot;         &quot;qtr&quot;          
##  [5] &quot;down&quot;          &quot;time&quot;          &quot;PlayTimeDiff&quot;  &quot;yrdline100&quot;   
##  [9] &quot;ydstogo&quot;       &quot;ydsnet&quot;        &quot;GoalToGo&quot;      &quot;posteam&quot;      
## [13] &quot;DefensiveTeam&quot; &quot;Yards.Gained&quot;  &quot;Season&quot;</code></pre>
<p>A very common use of the select command is to use it in combination with the <code>na.omit</code> command. For example, we saw that applying the <code>na.omit</code> command to the whole animal_sleep data set left us with only 20 species (rows) where all 11 columns had been measured.</p>
<p>However, if we are only interested in a few of the columns (for example species and brainwt) it doesn’t make sense to get rid of a row just because we don’t have its diet listed as we aren’t planning to use that anyways.</p>
<p>The below command limits the data to what we are interested in first using the select command, and then removes any missing data.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="data-wrangling.html#cb197-1" aria-hidden="true" tabindex="-1"></a>trim_animal2<span class="ot">=</span><span class="fu">na.omit</span>(dplyr<span class="sc">::</span><span class="fu">select</span>(animal_sleep, name, brainwt))</span>
<span id="cb197-2"><a href="data-wrangling.html#cb197-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(trim_animal2)</span></code></pre></div>
<pre><code>##                          name brainwt
## 2                  Owl monkey 0.01550
## 4  Greater short-tailed shrew 0.00029
## 5                         Cow 0.42300
## 9                         Dog 0.07000
## 10                   Roe deer 0.09820
## 11                       Goat 0.11500</code></pre>
<p>Notice that we now have a much larger data set:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="data-wrangling.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(trim_animal2)</span></code></pre></div>
<pre><code>## [1] 56  2</code></pre>
<p>We will see that the select command will also be useful when chained together with our other commands.</p>
<div class="exercise">
<p><span id="exr:unnamed-chunk-142" class="exercise"><strong>Exercise 4.1  </strong></span>Create a new dataframe from the nflplays dataframe which has only the PlayType, Yards.Gained, posteam columns using the select command.</p>
</div>
<div class="exercise">
<p><span id="exr:unnamed-chunk-143" class="exercise"><strong>Exercise 4.2  </strong></span>From the nflplays data frame use the select command to grab all columns from posteam to Fumble. How many columns are left in your reduced data frame?</p>
</div>
<div class="exercise">
<p><span id="exr:unnamed-chunk-144" class="exercise"><strong>Exercise 4.3  </strong></span>Run the na.omit on animal_sleep and THEN select the name and brainwt columns. How many rows are left in this data set? Does the order of the commands matter?</p>
</div>
</div>
<div id="filter-select-rows" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Filter (select rows)<a href="data-wrangling.html#filter-select-rows" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>One of the most common things we want to do with a data set is pull out some of the rows. For example, in our <code>nflplays</code> set we might want to pull out only the rows where the play was a running play. We have seen how to do this already using the <code>subset</code> command. However, the more powerful library <code>dplyr</code> also has a function for doing this.</p>
<p>First, notice that the type of play is stored in the <code>PlayType</code> column of the data set. The below command will produce a new data frame which contains the same information as the full data set except it will now only contain rows where the PlayType is “Run”.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="data-wrangling.html#cb201-1" aria-hidden="true" tabindex="-1"></a>running<span class="ot">=</span><span class="fu">filter</span>(nflplays, PlayType<span class="sc">==</span><span class="st">&#39;Run&#39;</span>)</span>
<span id="cb201-2"><a href="data-wrangling.html#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(running)</span></code></pre></div>
<pre><code>## [1] 118888     43</code></pre>
<p>Notice that we use the double equal sign <code>==</code> here. We could grab all non running plays using:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="data-wrangling.html#cb203-1" aria-hidden="true" tabindex="-1"></a>tmp<span class="ot">=</span><span class="fu">filter</span>(nflplays, PlayType<span class="sc">!=</span><span class="st">&#39;Run&#39;</span>) <span class="do">##all plays besides running plays</span></span>
<span id="cb203-2"><a href="data-wrangling.html#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(tmp) <span class="do">##find the dimensions</span></span></code></pre></div>
<pre><code>## [1] 156903     43</code></pre>
<p>For numeric columns we can also filter using the greater than &gt;, less than &lt;, greater than or equal to &gt;=, or less than or equal to &lt;= operators.</p>
<p>For example, if we want to look only for plays which gained more than 30 yards we could use:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="data-wrangling.html#cb205-1" aria-hidden="true" tabindex="-1"></a>bigplays<span class="ot">=</span><span class="fu">filter</span>(nflplays, Yards.Gained<span class="sc">&gt;</span><span class="fl">30.0</span>)</span>
<span id="cb205-2"><a href="data-wrangling.html#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(bigplays)</span></code></pre></div>
<pre><code>## [1] 6007   43</code></pre>
<p>For we could then look at the distribution of these long plays based on the teams:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="data-wrangling.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(bigplays<span class="sc">$</span>posteam), <span class="at">las=</span><span class="dv">2</span>, <span class="at">main=</span><span class="st">&#39;Number of 30 Yard of More Plays Since 2009&#39;</span>, <span class="at">ylab=</span><span class="st">&#39;Num of Plays&#39;</span>, <span class="at">col=</span><span class="st">&#39;skyblue&#39;</span>)</span></code></pre></div>
<p><img src="statsbook_files/figure-html/unnamed-chunk-148-1.png" width="672" /></p>
<p>Finally, say we wanted to grab only plays run by either the Dallas Cowboys or Green Bay Packers. For this purpose <code>R</code> has the special word <code>%in%</code>. The below tests whether the <code>posteam</code> is in the vector we created.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="data-wrangling.html#cb208-1" aria-hidden="true" tabindex="-1"></a>dallas.gb<span class="ot">=</span><span class="fu">filter</span>(nflplays, posteam <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;GB&#39;</span>, <span class="st">&#39;DAL&#39;</span>))</span>
<span id="cb208-2"><a href="data-wrangling.html#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(dallas.gb<span class="sc">$</span>posteam)</span></code></pre></div>
<pre><code>## 
##  ARI  ATL  BAL  BUF  CAR  CHI  CIN  CLE  DAL  DEN  DET   GB  HOU  IND  JAC  JAX 
##    0    0    0    0    0    0    0    0 8536    0    0 8599    0    0    0    0 
##   KC   LA  LAC  MIA  MIN   NE   NO  NYG  NYJ  OAK  PHI  PIT   SD  SEA   SF  STL 
##    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0 
##   TB  TEN  WAS 
##    0    0    0</code></pre>
<div id="compound-criteria" class="section level3 hasAnchor" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Compound Criteria<a href="data-wrangling.html#compound-criteria" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="and" class="section level5 hasAnchor" number="4.4.1.0.1">
<h5><span class="header-section-number">4.4.1.0.1</span> AND<a href="data-wrangling.html#and" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>What if we want to grab rows with a more complicated criteria? For example, suppose we want to find all the running plays which were over 30 yards?</p>
<p>From the data set we want the <code>PlayType</code> column to be equal to ‘Run’, <strong>AND</strong> we want the Yards.Gained column to be greater than 30. This is easy using the filter command as we just add that condition as we did for the first one.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="data-wrangling.html#cb210-1" aria-hidden="true" tabindex="-1"></a>big.running.plays<span class="ot">=</span><span class="fu">filter</span>(nflplays,PlayType<span class="sc">==</span><span class="st">&#39;Run&#39;</span>,Yards.Gained<span class="sc">&gt;</span><span class="fl">30.0</span>)</span>
<span id="cb210-2"><a href="data-wrangling.html#cb210-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(big.running.plays)</span></code></pre></div>
<pre><code>## [1] 1090   43</code></pre>
<p>This makes a new data frame where we only have runs over 30 yards.</p>
<p>We can use the same column if we want to in our filter command. For example, the below gives plays which gained between 5 and 10 yards.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="data-wrangling.html#cb212-1" aria-hidden="true" tabindex="-1"></a>five.ten.plays<span class="ot">=</span><span class="fu">filter</span>(nflplays,Yards.Gained<span class="sc">&gt;=</span><span class="fl">5.0</span>, Yards.Gained<span class="sc">&lt;=</span><span class="fl">10.0</span>)</span>
<span id="cb212-2"><a href="data-wrangling.html#cb212-2" aria-hidden="true" tabindex="-1"></a><span class="do">##Now count up the number of pass and run plays which produced 5-10 yards</span></span>
<span id="cb212-3"><a href="data-wrangling.html#cb212-3" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(five.ten.plays<span class="sc">$</span>PlayType)</span></code></pre></div>
<pre><code>## 
##  Pass   Run 
## 37255 28829</code></pre>
<p>Whenever we have a series of conditions where we want only those rows where <strong>all of them hold</strong> we can use the filter command with each condition listed out with commas in between.</p>
</div>
<div id="or" class="section level5 hasAnchor" number="4.4.1.0.2">
<h5><span class="header-section-number">4.4.1.0.2</span> OR<a href="data-wrangling.html#or" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Now imagine we want to limit our data to just plays which happened on first or second down. The down is stored in the column <code>down</code>.</p>
<p>If we use the comma notation we are looking for plays which occurred on first and second down. This would be true for exactly zero plays.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="data-wrangling.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="do">##Wrong way!</span></span>
<span id="cb214-2"><a href="data-wrangling.html#cb214-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(nflplays,down<span class="sc">==</span><span class="dv">1</span>, down<span class="sc">==</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## # A tibble: 0 × 43
## # … with 43 variables: Date &lt;date&gt;, GameID &lt;int&gt;, Drive &lt;int&gt;, qtr &lt;int&gt;,
## #   down &lt;int&gt;, time &lt;time&gt;, PlayTimeDiff &lt;int&gt;, yrdline100 &lt;int&gt;,
## #   ydstogo &lt;int&gt;, ydsnet &lt;int&gt;, GoalToGo &lt;int&gt;, posteam &lt;fct&gt;,
## #   DefensiveTeam &lt;fct&gt;, Yards.Gained &lt;int&gt;, sp &lt;int&gt;, Touchdown &lt;int&gt;,
## #   Safety &lt;int&gt;, PlayType &lt;fct&gt;, Passer &lt;fct&gt;, PassOutcome &lt;fct&gt;,
## #   PassLength &lt;fct&gt;, AirYards &lt;int&gt;, YardsAfterCatch &lt;int&gt;, QBHit &lt;fct&gt;,
## #   PassLocation &lt;fct&gt;, InterceptionThrown &lt;fct&gt;, Interceptor &lt;chr&gt;, …</code></pre>
<p>Clearly, we need a different approach. Instead of a comma we should use a vertical bar <code>|</code>.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="data-wrangling.html#cb216-1" aria-hidden="true" tabindex="-1"></a>tmp<span class="ot">=</span><span class="fu">filter</span>(nflplays, down<span class="sc">==</span><span class="dv">1</span><span class="sc">|</span> down<span class="sc">==</span><span class="dv">2</span>)</span>
<span id="cb216-2"><a href="data-wrangling.html#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(tmp<span class="sc">$</span>PlayType))</span></code></pre></div>
<pre><code>## 
##      Pass       Run 
## 0.5132606 0.4867394</code></pre>
<p>We could compare this with the percentage of the play types on third down:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="data-wrangling.html#cb218-1" aria-hidden="true" tabindex="-1"></a>tmp<span class="ot">=</span><span class="fu">filter</span>(nflplays, down<span class="sc">==</span><span class="dv">3</span>)</span>
<span id="cb218-2"><a href="data-wrangling.html#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(tmp<span class="sc">$</span>PlayType))</span></code></pre></div>
<pre><code>## 
##      Pass       Run 
## 0.7787376 0.2212624</code></pre>
<p>Clearly, a pass is much more likely on a third down.</p>
<div class="exercise">
<p><span id="exr:unnamed-chunk-155" class="exercise"><strong>Exercise 4.4  </strong></span>How many pass plays resulted in a fumble in the data set? How does this compare to the number of Run plays that resulted in a fumble? Use the filter command and the fumble column and the PlayType column.</p>
</div>
<div class="exercise">
<p><span id="exr:unnamed-chunk-156" class="exercise"><strong>Exercise 4.5  </strong></span>How many pass plays resulted in a fumble OR an interception?</p>
</div>
<div class="exercise">
<p><span id="exr:unnamed-chunk-157" class="exercise"><strong>Exercise 4.6  </strong></span>How many pass plays did the New York Giants (NYG) run on third down?</p>
</div>
</div>
</div>
</div>
<div id="chainspipes" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> Chains/Pipes %&gt;%<a href="data-wrangling.html#chainspipes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>How about if we are interested in finding the yards gained on third down pass plays?</p>
<p>Here is a quick way to get to this information:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="data-wrangling.html#cb220-1" aria-hidden="true" tabindex="-1"></a>nflplays <span class="sc">%&gt;%</span> <span class="fu">filter</span>(down<span class="sc">==</span><span class="dv">3</span>, PlayType<span class="sc">==</span><span class="st">&#39;Pass&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(Yards.Gained) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 1
##    Yards.Gained
##           &lt;int&gt;
##  1            0
##  2            0
##  3            8
##  4            0
##  5            8
##  6            0
##  7            8
##  8            0
##  9            0
## 10            7</code></pre>
<p>This is our first example of the powerful chaining capability in dplyr. This is the weird notation <code>%&gt;%</code> which means take the output of the last entry as the input to the next. Of course, that is a complicated way of saying we formed a chain. We start with the full data set, then filter it to just the rows which match our conditions then we select the only column we care about from that filtered data set. All of the dplyr commands can be used in a chain.</p>
<div class="exercise">
<p><span id="exr:unnamed-chunk-159" class="exercise"><strong>Exercise 4.7  </strong></span>Use a chain to find the order of animals in the <code>animal_sleep</code> data set from the smallest to largest brain weight (brainwt). Do this all in one command.</p>
</div>
</div>
<div id="grouping-data-together" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> Grouping Data Together<a href="data-wrangling.html#grouping-data-together" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Our nfl plays data set is based around recording data for each individual play. However, we might be more interested in grouping things by the player, team, league, play-type, etc.</p>
<p>For example, lets try and find the average yards gained per play for each team:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="data-wrangling.html#cb222-1" aria-hidden="true" tabindex="-1"></a>nflplays <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(posteam) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">av.yds.gained=</span><span class="fu">mean</span>(Yards.Gained))</span></code></pre></div>
<pre><code>## # A tibble: 36 × 2
##    posteam av.yds.gained
##    &lt;fct&gt;           &lt;dbl&gt;
##  1 ARI              5.77
##  2 ATL              6.12
##  3 BAL              5.65
##  4 BUF              5.71
##  5 CAR              5.90
##  6 CHI              5.84
##  7 CIN              5.73
##  8 CLE              5.44
##  9 DAL              6.34
## 10 DEN              5.99
## # … with 26 more rows</code></pre>
<p>Let’s unpack what this command does. It first groups the plays by the <code>posteam</code> column meaning grouped by the team with the ball. The group_by command is not terribly useful by itself, you will just about always want to use it in combination with the summarize command. The summarize command is used to create a summary of the data <strong>after it</strong> has been grouped in some way. It will create new summary columns in a new data frame. In this case we compute the mean of the Yards.Gained column.</p>
<p>Typically, we will want to group our data using a <strong>categorical column(s)</strong> in the data set.</p>
<p>We can extend this basic command in many different ways. For example, we can group our data using more than one categorical variable. The below command finds the average yards gained for each team and season.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="data-wrangling.html#cb224-1" aria-hidden="true" tabindex="-1"></a>nflplays <span class="sc">%&gt;%</span> </span>
<span id="cb224-2"><a href="data-wrangling.html#cb224-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(posteam, Season) <span class="sc">%&gt;%</span> </span>
<span id="cb224-3"><a href="data-wrangling.html#cb224-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">av.yards.gained=</span><span class="fu">mean</span>(Yards.Gained))</span></code></pre></div>
<pre><code>## # A tibble: 297 × 3
## # Groups:   posteam [36]
##    posteam Season av.yards.gained
##    &lt;fct&gt;   &lt;fct&gt;            &lt;dbl&gt;
##  1 ARI     2009              6.07
##  2 ARI     2010              5.21
##  3 ARI     2011              6.05
##  4 ARI     2012              4.78
##  5 ARI     2013              5.94
##  6 ARI     2014              5.55
##  7 ARI     2015              6.88
##  8 ARI     2016              5.96
##  9 ARI     2017              5.47
## 10 ATL     2009              5.54
## # … with 287 more rows</code></pre>
<p>Now we can see the average yards gained for each team and season from the results.</p>
<p>In addition we could also calculate more columns in our summary. For example, in the below we find the mean yards gained, the median yards gained and the standard deviation.</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="data-wrangling.html#cb226-1" aria-hidden="true" tabindex="-1"></a>nflplays <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(posteam, Season) <span class="sc">%&gt;%</span> </span>
<span id="cb226-2"><a href="data-wrangling.html#cb226-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">av.yards.gained=</span><span class="fu">mean</span>(Yards.Gained), <span class="at">median.yds.gained=</span><span class="fu">median</span>(Yards.Gained), <span class="at">sd.yds.gained=</span><span class="fu">sd</span>(Yards.Gained))</span></code></pre></div>
<pre><code>## # A tibble: 297 × 5
## # Groups:   posteam [36]
##    posteam Season av.yards.gained median.yds.gained sd.yds.gained
##    &lt;fct&gt;   &lt;fct&gt;            &lt;dbl&gt;             &lt;dbl&gt;         &lt;dbl&gt;
##  1 ARI     2009              6.07                 4          7.49
##  2 ARI     2010              5.21                 2          8.19
##  3 ARI     2011              6.05                 3          9.48
##  4 ARI     2012              4.78                 2          7.26
##  5 ARI     2013              5.94                 3          8.94
##  6 ARI     2014              5.55                 2          9.01
##  7 ARI     2015              6.88                 4          9.74
##  8 ARI     2016              5.96                 3          8.45
##  9 ARI     2017              5.47                 3          7.56
## 10 ATL     2009              5.54                 3          7.67
## # … with 287 more rows</code></pre>
<p>The names you choose in the summarize command are up to you. Just name them something you will be able to remember for later. We can use any of our summary statistics commands learned in the EDA notes to find a summary of our grouped data.</p>
<p>Sometimes you might want to just find the number of entries as well. For this we can use the <code>n()</code> function. This just counts up the number of entries in each group. The below adds a column which gives the number of plays.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="data-wrangling.html#cb228-1" aria-hidden="true" tabindex="-1"></a>nflplays <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(posteam, Season) <span class="sc">%&gt;%</span> </span>
<span id="cb228-2"><a href="data-wrangling.html#cb228-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">av.yards.gained=</span><span class="fu">mean</span>(Yards.Gained), <span class="at">number.of.plays=</span><span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 297 × 4
## # Groups:   posteam [36]
##    posteam Season av.yards.gained number.of.plays
##    &lt;fct&gt;   &lt;fct&gt;            &lt;dbl&gt;           &lt;int&gt;
##  1 ARI     2009              6.07             921
##  2 ARI     2010              5.21             863
##  3 ARI     2011              6.05             913
##  4 ARI     2012              4.78             941
##  5 ARI     2013              5.94             958
##  6 ARI     2014              5.55             943
##  7 ARI     2015              6.88             961
##  8 ARI     2016              5.96            1026
##  9 ARI     2017              5.47             980
## 10 ATL     2009              5.54             981
## # … with 287 more rows</code></pre>
<p>Also, it is sometimes useful to add up a column for each group. We can do this with the <code>sum()</code> command in <code>R</code>. Let’s add a column to our data which has the total yards gained for each season/team.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="data-wrangling.html#cb230-1" aria-hidden="true" tabindex="-1"></a>nflplays <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(posteam, Season) <span class="sc">%&gt;%</span> </span>
<span id="cb230-2"><a href="data-wrangling.html#cb230-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">av.yards.gained=</span><span class="fu">mean</span>(Yards.Gained), <span class="at">number.of.plays=</span><span class="fu">n</span>(), <span class="at">total.yards=</span><span class="fu">sum</span>(Yards.Gained))</span></code></pre></div>
<pre><code>## # A tibble: 297 × 5
## # Groups:   posteam [36]
##    posteam Season av.yards.gained number.of.plays total.yards
##    &lt;fct&gt;   &lt;fct&gt;            &lt;dbl&gt;           &lt;int&gt;       &lt;int&gt;
##  1 ARI     2009              6.07             921        5587
##  2 ARI     2010              5.21             863        4495
##  3 ARI     2011              6.05             913        5526
##  4 ARI     2012              4.78             941        4495
##  5 ARI     2013              5.94             958        5688
##  6 ARI     2014              5.55             943        5233
##  7 ARI     2015              6.88             961        6610
##  8 ARI     2016              5.96            1026        6115
##  9 ARI     2017              5.47             980        5364
## 10 ATL     2009              5.54             981        5431
## # … with 287 more rows</code></pre>
<div id="example-1" class="section level4 hasAnchor" number="4.6.0.1">
<h4><span class="header-section-number">4.6.0.1</span> Example 1<a href="data-wrangling.html#example-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Lets find the number of plays which were pass plays for each team in the NFL.</p>
<p>First we want to filter to keep only rows which correspond to a pass play. Then we will group these by the teams and summarize by counting up the number of pass plays.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="data-wrangling.html#cb232-1" aria-hidden="true" tabindex="-1"></a>nflplays <span class="sc">%&gt;%</span> <span class="fu">filter</span>(PlayType<span class="sc">==</span><span class="st">&#39;Pass&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb232-2"><a href="data-wrangling.html#cb232-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(posteam) <span class="sc">%&gt;%</span> </span>
<span id="cb232-3"><a href="data-wrangling.html#cb232-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">num.pass.plays=</span><span class="fu">n</span>()) </span></code></pre></div>
<pre><code>## # A tibble: 36 × 2
##    posteam num.pass.plays
##    &lt;fct&gt;            &lt;int&gt;
##  1 ARI               5169
##  2 ATL               5244
##  3 BAL               5115
##  4 BUF               4477
##  5 CAR               4455
##  6 CHI               4661
##  7 CIN               4730
##  8 CLE               4900
##  9 DAL               4852
## 10 DEN               5110
## # … with 26 more rows</code></pre>
</div>
<div id="example-2" class="section level4 hasAnchor" number="4.6.0.2">
<h4><span class="header-section-number">4.6.0.2</span> Example 2<a href="data-wrangling.html#example-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Lets find the average yards per rush attempt grouped by the player attempting the rush. Now we are grouping by the categorical variable <code>Rusher</code> instead of the team.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="data-wrangling.html#cb234-1" aria-hidden="true" tabindex="-1"></a>nflplays <span class="sc">%&gt;%</span> <span class="fu">filter</span>(PlayType<span class="sc">==</span><span class="st">&#39;Run&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb234-2"><a href="data-wrangling.html#cb234-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Rusher) <span class="sc">%&gt;%</span> </span>
<span id="cb234-3"><a href="data-wrangling.html#cb234-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">av.yards.per.carry=</span><span class="fu">mean</span>(Yards.Gained))</span></code></pre></div>
<pre><code>## # A tibble: 1,205 × 2
##    Rusher      av.yards.per.carry
##    &lt;fct&gt;                    &lt;dbl&gt;
##  1 A. Bradshaw              -5   
##  2 A.Abdullah                3.88
##  3 A.Allen                   4.10
##  4 A.Andrews                 3.61
##  5 A.Armstrong               9.5 
##  6 A.Bailey                  1   
##  7 A.Barbre                 15   
##  8 A.Benn                    2.93
##  9 A.Blue                    3.59
## 10 A.Boldin                  4   
## # … with 1,195 more rows</code></pre>
<p>Even this summary data set is rather large so we might want to refine it some more. It has some strange points because some of the players only carried the ball a few times. Let’s get rid of the players that carried the ball less than 200 times.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="data-wrangling.html#cb236-1" aria-hidden="true" tabindex="-1"></a>nflplays <span class="sc">%&gt;%</span> <span class="fu">filter</span>(PlayType<span class="sc">==</span><span class="st">&#39;Run&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb236-2"><a href="data-wrangling.html#cb236-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Rusher) <span class="sc">%&gt;%</span> </span>
<span id="cb236-3"><a href="data-wrangling.html#cb236-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">av.yards.per.carry=</span><span class="fu">mean</span>(Yards.Gained), <span class="at">num.carries=</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb236-4"><a href="data-wrangling.html#cb236-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(num.carries<span class="sc">&gt;=</span><span class="dv">200</span>)</span></code></pre></div>
<pre><code>## # A tibble: 159 × 3
##    Rusher      av.yards.per.carry num.carries
##    &lt;fct&gt;                    &lt;dbl&gt;       &lt;int&gt;
##  1 A.Abdullah                3.88         317
##  2 A.Blue                    3.59         514
##  3 A.Bradshaw                4.43         977
##  4 A.Brown                   4.12         288
##  5 A.Collins                 4.54         237
##  6 A.Dalton                  4.61         244
##  7 A.Dixon                   3.48         268
##  8 A.Ellington               4.12         410
##  9 A.Foster                  4.36        1460
## 10 A.Luck                    7.18         203
## # … with 149 more rows</code></pre>
<p>We might want to <strong>sort this data</strong> to put it in some order based on the average yards per carry. We can do this with the <code>arrange()</code> command from <code>dplyr</code>.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="data-wrangling.html#cb238-1" aria-hidden="true" tabindex="-1"></a>nflplays <span class="sc">%&gt;%</span> <span class="fu">filter</span>(PlayType<span class="sc">==</span><span class="st">&#39;Run&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb238-2"><a href="data-wrangling.html#cb238-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Rusher) <span class="sc">%&gt;%</span> </span>
<span id="cb238-3"><a href="data-wrangling.html#cb238-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">av.yards.per.carry=</span><span class="fu">mean</span>(Yards.Gained), <span class="at">num.carries=</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb238-4"><a href="data-wrangling.html#cb238-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(num.carries<span class="sc">&gt;=</span><span class="dv">200</span>) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(av.yards.per.carry)</span></code></pre></div>
<pre><code>## # A tibble: 159 × 3
##    Rusher     av.yards.per.carry num.carries
##    &lt;fct&gt;                   &lt;dbl&gt;       &lt;int&gt;
##  1 &lt;NA&gt;                     2.28         388
##  2 C.Taylor                 2.92         219
##  3 J.Kuhn                   3.08         206
##  4 S.Draughn                3.11         221
##  5 K.Davis                  3.27         244
##  6 A.Williams               3.30         328
##  7 J.Best                   3.30         247
##  8 M.Bell                   3.35         213
##  9 T.Riddick                3.39         239
## 10 T.Mason                  3.40         248
## # … with 149 more rows</code></pre>
<p>To use the arrange command you just give it the column (numerical generally) that you want to use to sort the data. By default it will sort the data into ascending order (small to big). If we want to reverse that (big to small) we can use the <code>desc()</code> command.</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="data-wrangling.html#cb240-1" aria-hidden="true" tabindex="-1"></a>nflplays <span class="sc">%&gt;%</span> <span class="fu">filter</span>(PlayType<span class="sc">==</span><span class="st">&#39;Run&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Rusher) <span class="sc">%&gt;%</span> </span>
<span id="cb240-2"><a href="data-wrangling.html#cb240-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">av.yards.per.carry=</span><span class="fu">mean</span>(Yards.Gained), <span class="at">num.carries=</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb240-3"><a href="data-wrangling.html#cb240-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(num.carries<span class="sc">&gt;=</span><span class="dv">500</span>) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(av.yards.per.carry))</span></code></pre></div>
<pre><code>## # A tibble: 70 × 3
##    Rusher     av.yards.per.carry num.carries
##    &lt;fct&gt;                   &lt;dbl&gt;       &lt;int&gt;
##  1 C.Newton                 5.94         740
##  2 J.Charles                5.26        1309
##  3 C.Spiller                4.97         694
##  4 E.Elliott                4.69         550
##  5 J.Forsett                4.68         809
##  6 A.Peterson               4.68        1952
##  7 D.Sproles                4.67         576
##  8 M.Ingram                 4.57        1155
##  9 L.McCoy                  4.54        2135
## 10 F.Jones                  4.5          578
## # … with 60 more rows</code></pre>
<div class="exercise">
<p><span id="exr:unnamed-chunk-170" class="exercise"><strong>Exercise 4.8  </strong></span>Find the average yards gained for Run plays grouped by the team. You will need to add a filter command to the chain.</p>
</div>
<div class="exercise">
<p><span id="exr:unnamed-chunk-171" class="exercise"><strong>Exercise 4.9  </strong></span>Find average yards gained for Pass plays grouped by the Passer. Eliminate those Passers who threw less than 300 passes and find the top ten passers</p>
</div>

<div class="advanced">
For more information about data wrangling in R I recommend that you read <span class="citation">(<a href="#ref-Wickham2016" role="doc-biblioref">Wickham and Grolemund 2016</a>)</span>. One topic that is missing from these notes and is pretty commonly needed is merging together two data frames of data. Many ways exist for merging two data set together. If you need to do this then please see the discussion in <span class="citation">(<a href="#ref-Wickham2016" role="doc-biblioref">Wickham and Grolemund 2016</a>)</span> which is freely available online.
</div>
</div>
</div>
<div id="homework-2" class="section level2 hasAnchor" number="4.7">
<h2><span class="header-section-number">4.7</span> Homework<a href="data-wrangling.html#homework-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="concept-questions-2" class="section level3 hasAnchor" number="4.7.1">
<h3><span class="header-section-number">4.7.1</span> Concept Questions<a href="data-wrangling.html#concept-questions-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Explain what the <code>dplyr</code> commands <code>select</code>, <code>filter</code>, <code>group_by</code>, <code>summarize</code>, and <code>arrange</code> do.</li>
<li>(True/False) The na.omit command is used to remove all rows from a data frame which have any columns missing.</li>
<li>(True/False) The order we apply the select command and na.omit can change the results</li>
<li>(True/False) The <code>group_by</code> command is used to create groups of rows based on a categorical variable</li>
<li>(True/False) The arrange command reorders the rows of the data using a given column from small to large (by default)</li>
<li>(True/False) The <code>group_by</code> command should always be paired the <code>summarize</code> command. The <code>group_by</code> command doesn’t really change anything by itself.</li>
<li>(True/False) The <code>dplyr</code> package is awesome. This topic is so awesome you just can’t stop computing things.</li>
<li>(True/False) The first step in looking for a relationship between two categorical variables is to make a contingency table using the <code>table</code> command.</li>
</ol>
</div>
<div id="practice-problems-2" class="section level3 hasAnchor" number="4.7.2">
<h3><span class="header-section-number">4.7.2</span> Practice Problems<a href="data-wrangling.html#practice-problems-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Load the <code>flightNYCFull</code> data. This data has data for over 300,000 flights departing from NYC in 2013.</p>
<ul>
<li>Filter this data to contain only flights which came from the carriers AA or UA (american or united airlines).</li>
<li>Filter this data to contain only flights from carrier ‘US’ and origin=‘JFK’</li>
<li>Find the average departure delays for the carrier ‘US’ with origin=‘JFK’</li>
</ul></li>
<li><p>Load the <code>BirdCaptureData</code>. This data set contains over 14000 recordings of captured birds at a bird station in California. Besides other information it contains the day of the year each bird was captured (<code>JulianDay</code>), the species code of the bird <code>SpeciesCode</code> and the <code>Season</code> (either Fall or Spring). The species in this study are migratory, so they are passing through when they are captured. Find the median capture day for each species in the two seasons.</p></li>
<li><p>Load the <code>BirdCaptureData</code>. Make the appropriate plot to look for a relationship between the <code>Season</code> column and the <code>SpeciesCode</code>. Find the percentages of the birds captured for each species in the two seasons. Is this roughly the same for all the bird species?</p></li>
</ol>
<div id="advanced-problems-2" class="section level4 hasAnchor" number="4.7.2.1">
<h4><span class="header-section-number">4.7.2.1</span> Advanced Problems<a href="data-wrangling.html#advanced-problems-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li>Load the Young_People_Survey data, and look familiarize yourself with the data set using `?Young_People_Survey. Find the average weight (the Weight column) of grouped by they participants answer to the “Healthy Eating”” column. Make a barplot of this result.</li>
</ol>
<p>Hint: You will need to remove the missing values NA from the data set using the <code>na.omit</code> command. This will drop all rows which are missing values in any column in the data set.</p>
<p>So your answer will start with:</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="data-wrangling.html#cb242-1" aria-hidden="true" tabindex="-1"></a>Young_People_Survey <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="st">`</span><span class="at">Healthy eating</span><span class="st">`</span>, Weight) <span class="sc">%&gt;%</span> <span class="fu">na.omit</span>() </span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li><p>Load the demographic_data data set. This has demographic information for over 11,000 cities in the US. Find the average of the debt.proportion column for each state in the data set. What state has the smallest average debt proportion?</p></li>
<li><p>Load the wine_tasting data set. What country has the most number of wines which are priced above 100 dollars?</p></li>
<li><p>Load the <code>shot_logs_2014</code> data set. Notice you can find the percentage of shots are made for the whole data set using the command <code>mean(shot_logs_2014$FGM)</code>. This is because the <code>FGM</code> column has a 1 if the shot was made and a zero if it was missed. The team playing defense on a given shot is stored in the <code>Team.Defending</code> column of the data set. Group this data by the team defending and find the allowed field goal percentage. Sort this data from smallest to largest. What team allowed the smallest of percentage of made baskets (best defense)?</p></li>
<li><p>Load the <code>HR_Employee_Attrition</code> data set. Each row contains information about one individual at a company. Group the employees by the <code>Department</code> and find the average and sd of the <code>DailyRate</code> for each department.</p></li>
<li><p>Load the <code>flightNYCFull</code> data set.</p>
<ul>
<li>Find the mean and median departure delay for each of the carriers.</li>
<li>Now group the data using both the carrier and the origin and find the median departure delays. Arrange the data from the smallest median delay to the largest.</li>
</ul></li>
</ol>

</div>
</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Wickham2016" class="csl-entry">
Wickham, Hadley, and Garrett Grolemund. 2016. <em>R for Data Science: Import, Tidy, Transform, Visualize, and Model Data</em>. " O’Reilly Media, Inc.".
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="exploratory-data-analysis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introduction-to-clustering.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-DataWrangling.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["statsbook.pdf", "statsbook.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"collapse": "section"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
